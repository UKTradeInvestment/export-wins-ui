var ew={application:{components:{}}};ew.CustomEvent=function(){function a(){this.subscribers=[]}var b=a.prototype;return b.subscribe=function(a){this.subscribers.push(a)},b.unSubscribe=function(a){for(var b=0,c=this.subscribers.length;b<c;b++)if(this.subscribers[b]===a){this.subscribers.pop(b,1);break}},b.publish=function(){for(var a=this.subscribers.length-1;a>=0;a--)try{this.subscribers[a].apply(this,arguments)}catch(a){}},a}(),ew.pages={},ew.components={},ew.components.AddContributors=function(){function a(a){if(!a)throw new Error("opts are required to create AddContributorsComponent");if(!a.contributorsSelector)throw new Error("contributorsSelector is required for AddContributorsComponent");if(!a.nameInputSelector)throw new Error("nameInputSelector is required for AddContributorsComponent");var b=this;this.$contributors=$(a.contributorsSelector),this.contributorsSelector=a.contributorsSelector,this.nameInputSelector=a.nameInputSelector,this.shownContributors=0,this.contributorsLength=this.$contributors.length,this.createAddButton(),this.hideContributingLines(),this.showCloseButton(),this.$contributors.on("click",".remove-contributor",function(a){b.removeContributor(a,this)})}return a.prototype.focusOnFirstNameInput=function(){var a=$(this.$contributors[0]).find(this.nameInputSelector);a.val()||a.focus()},a.prototype.showCloseButton=function(){var a='<button type="button" class="btn btn-xs btn-default remove-contributor" aria-label="Remove contributor" title="Remove contributor">Remove</button>',b=$(this.contributorsSelector+":visible").last();b.is(this.$contributors[0])||b.prepend(a)},a.prototype.removeCloseButton=function(){$(this.contributorsSelector+" .remove-contributor").remove()},a.prototype.updateCloseButton=function(){this.removeCloseButton(),this.showCloseButton()},a.prototype.createAddButton=function(){this.$addButton=$('<button class="btn btn-default">Add another contributor</button>'),this.$contributors.parent().append(this.$addButton),this.$addButton.on("click",$.proxy(this.addContributor,this))},a.prototype.hideContributingLines=function(){var a=this;a.$contributors.each(function(b){var c,d=$(this);0===b?d.show():b>a.shownContributors?(c=d.find(a.nameInputSelector),c.val().length>0?(d.show(),a.shownContributors++):d.hide()):d.hide()})},a.prototype.addContributor=function(a){var b;a.preventDefault(),this.shownContributors<this.contributorsLength?(this.shownContributors++,b=$(this.$contributors[this.shownContributors]),b.show(),b.find(this.nameInputSelector).focus(),this.updateCloseButton(),this.checkAddButtonState()):alert("Sorry, the system can't add more than 5 contributing teams. Please choose teams that contributed the most.")},a.prototype.checkAddButtonState=function(){var a=this.shownContributors===this.contributorsLength-1;this.$addButton[0].disabled=a},a.prototype.removeContributor=function(a,b){var c=$(b).parent(this.contributorsSelector);c.hide(),c.find("input").val(""),c.find("select").each(function(){this.selectedIndex=0}),this.shownContributors--,this.updateCloseButton(),this.checkAddButtonState()},a}(),ew.components.ToggleContributors=function(){function a(a){if(!a)throw new Error("opts is required for ToggleContributorsComponent");if(!a.$contributingTeamDetails)throw new Error("$contributingTeamDetails is required for ToggleContributorsComponent");if(!a.$someContributors)throw new Error("$someContributors is required for ToggleContributorsComponent");if(!a.noContributorsSelector)throw new Error("noContributorsSelector is required for ToggleContributorsComponent");this.$contributingTeamDetails=a.$contributingTeamDetails,this.$someContributors=a.$someContributors,this.noContributorsSelector=a.noContributorsSelector,this.events={showDetails:new ew.CustomEvent},this.checkContributingDetails(),this.createListeners()}return a.prototype.toggleContributingDetails=function(a){this.$someContributors[0].checked?(this.$contributingTeamDetails.show(),this.events.showDetails.publish()):this.$contributingTeamDetails.hide()},a.prototype.createListeners=function(){var a=$(this.noContributorsSelector),b=$.proxy(this.toggleContributingDetails,this);this.$someContributors.on("click",b),a.on("click",b)},a.prototype.checkContributingDetails=function(){this.$someContributors[0].checked||this.$contributingTeamDetails.hide()},a}(),ew.pages.confirmationForm=function(a){var b=$("#confirm-false-info"),c=$("form input[name="+a+"]");$("#confirm-false-details");c[1].checked||b.hide(),c.on("change",function(a){c[0].checked?b.hide():b.show()})},ew.pages.officerForm=function(){function a(){$("#id_team_type").on("change",function(){var a=$(this).val(),b=$("#id_hq_team option[value^="+a+"]");$("#id_hq_team option").addClass(c),b.removeClass(c),$("#id_hq_team").val(b.first().val())})}function b(){$(".contributing-officer-team-group .contributing-team-type select").on("change",function(){var a=$(this),b=a.val(),d=a.closest(".row").find(".contributing-team select"),e=d.find("option[value^="+b+"]");d.val(e.first().val()),d.find("option").addClass(c),e.removeClass(c)})}var c="hidden";return function(){var c=ew.application,d=c.components;a(),b(),d.toggleContributors=new ew.components.ToggleContributors({$contributingTeamDetails:$("#contributing-teams-details"),$someContributors:$("#some-contributors"),noContributorsSelector:"#no-contributors"}),d.addContributors=new ew.components.AddContributors({contributorsSelector:".contributing-officer-group",nameInputSelector:".contributing-officer-name input"}),d.toggleContributors.events.showDetails.subscribe(function(){d.addContributors.focusOnFirstNameInput(),d.addContributors.updateCloseButton()})}}();
//# sourceMappingURL=main.min.js.map